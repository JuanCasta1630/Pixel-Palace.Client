"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[578],{53878:function(e,t,r){r.d(t,{Y:function(){return signInWithEmailAndPassword},r:function(){return registerAuth}});var n,i,o=r(50044),s=r(8745),a=r(63991),u=r(45538),c=r(56914),l="__sak",d=function(){function Receiver(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return Receiver._getInstance=function(e){var t=this.receivers.find(function(t){return t.isListeningto(e)});if(t)return t;var r=new Receiver(e);return this.receivers.push(r),r},Receiver.prototype.isListeningto=function(e){return this.eventTarget===e},Receiver.prototype.handleEvent=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t,r,n,i,s,a,u,c=this;return(0,o.Jh)(this,function(l){switch(l.label){case 0:if(n=(r=(t=e).data).eventId,i=r.eventType,s=r.data,!(null==(a=this.handlersMap[i])?void 0:a.size))return[2];return t.ports[0].postMessage({status:"ack",eventId:n,eventType:i}),[4,/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){var t=this;return Promise.all(e.map(function(e){return(0,o.mG)(t,void 0,void 0,function(){return(0,o.Jh)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,e];case 1:return[2,{fulfilled:!0,value:t.sent()}];case 2:return[2,{fulfilled:!1,reason:t.sent()}];case 3:return[2]}})})}))}(Array.from(a).map(function(e){return(0,o.mG)(c,void 0,void 0,function(){return(0,o.Jh)(this,function(r){return[2,e(t.origin,s)]})})}))];case 1:return u=l.sent(),t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:u}),[2]}})})},Receiver.prototype._subscribe=function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)},Receiver.prototype._unsubscribe=function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)},Receiver.receivers=[],Receiver}(),h=function(){function Sender(e){this.target=e,this.handlers=new Set}return Sender.prototype.removeMessageHandler=function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)},Sender.prototype._send=function(e,t,r){return void 0===r&&(r=50),(0,o.mG)(this,void 0,void 0,function(){var n,i,s,a=this;return(0,o.Jh)(this,function(o){if(!(n="undefined"!=typeof MessageChannel?new MessageChannel:null))throw Error("connection_unavailable");return[2,new Promise(function(o,u){var c=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t){void 0===e&&(e=""),void 0===t&&(t=10);for(var r="",n=0;n<t;n++)r+=Math.floor(10*Math.random());return e+r}("",20);n.port1.start();var l=setTimeout(function(){u(Error("unsupported_event"))},r);s={messageChannel:n,onMessage:function(e){if(e.data.eventId===c)switch(e.data.status){case"ack":clearTimeout(l),i=setTimeout(function(){u(Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(e.data.response);break;default:clearTimeout(l),clearTimeout(i),u(Error("invalid_response"))}}},a.handlers.add(s),n.port1.addEventListener("message",s.onMessage),a.target.postMessage({eventType:e,eventId:c,data:t},[n.port2])}).finally(function(){s&&a.removeMessageHandler(s)})]})})},Sender}();/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isWorker(){return void 0!==window.WorkerGlobalScope&&"function"==typeof window.importScripts}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var p="firebaseLocalStorageDb",f="firebaseLocalStorage",v="fbase_key",m=function(){function DBPromise(e){this.request=e}return DBPromise.prototype.toPromise=function(){var e=this;return new Promise(function(t,r){e.request.addEventListener("success",function(){t(e.request.result)}),e.request.addEventListener("error",function(){r(e.request.error)})})},DBPromise}();function getObjectStore(e,t){return e.transaction([f],t?"readwrite":"readonly").objectStore(f)}function _openDatabase(){var e=this,t=indexedDB.open(p,1);return new Promise(function(r,n){t.addEventListener("error",function(){n(t.error)}),t.addEventListener("upgradeneeded",function(){var e=t.result;try{e.createObjectStore(f,{keyPath:v})}catch(e){n(e)}}),t.addEventListener("success",function(){return(0,o.mG)(e,void 0,void 0,function(){var e,n;return(0,o.Jh)(this,function(i){switch(i.label){case 0:var o;if((e=t.result).objectStoreNames.contains(f))return[3,3];return e.close(),[4,(o=indexedDB.deleteDatabase(p),new m(o).toPromise())];case 1:return i.sent(),n=r,[4,_openDatabase()];case 2:return n.apply(void 0,[i.sent()]),[3,4];case 3:r(e),i.label=4;case 4:return[2]}})})})})}function _putObject(e,t,r){return(0,o.mG)(this,void 0,void 0,function(){var n,i;return(0,o.Jh)(this,function(o){return n=getObjectStore(e,!0).put(((i={})[v]=t,i.value=r,i)),[2,new m(n).toPromise()]})})}function _deleteObject(e,t){var r=getObjectStore(e,!0).delete(t);return new m(r).toPromise()}function _prodErrorMap(){var e;return(e={})["dependent-sdk-initialized-before-auth"]="Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",e}!function(){function IndexedDBLocalPersistence(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(function(){},function(){})}IndexedDBLocalPersistence.prototype._openDb=function(){return(0,o.mG)(this,void 0,void 0,function(){var e;return(0,o.Jh)(this,function(t){switch(t.label){case 0:if(this.db)return[2,this.db];return e=this,[4,_openDatabase()];case 1:return e.db=t.sent(),[2,this.db]}})})},IndexedDBLocalPersistence.prototype._withRetries=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t,r;return(0,o.Jh)(this,function(n){switch(n.label){case 0:t=0,n.label=1;case 1:n.label=2;case 2:return n.trys.push([2,5,,6]),[4,this._openDb()];case 3:return[4,e(n.sent())];case 4:return[2,n.sent()];case 5:if(r=n.sent(),t++>3)throw r;return this.db&&(this.db.close(),this.db=void 0),[3,6];case 6:return[3,1];case 7:return[2]}})})},IndexedDBLocalPersistence.prototype.initializeServiceWorkerMessaging=function(){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(e){return[2,_isWorker()?this.initializeReceiver():this.initializeSender()]})})},IndexedDBLocalPersistence.prototype.initializeReceiver=function(){return(0,o.mG)(this,void 0,void 0,function(){var e=this;return(0,o.Jh)(this,function(t){return this.receiver=d._getInstance(_isWorker()?self:null),this.receiver._subscribe("keyChanged",function(t,r){return(0,o.mG)(e,void 0,void 0,function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return[4,this._poll()];case 1:return[2,{keyProcessed:e.sent().includes(r.key)}]}})})}),this.receiver._subscribe("ping",function(t,r){return(0,o.mG)(e,void 0,void 0,function(){return(0,o.Jh)(this,function(e){return[2,["keyChanged"]]})})}),[2]})})},IndexedDBLocalPersistence.prototype.initializeSender=function(){var e,t;return(0,o.mG)(this,void 0,void 0,function(){var r,n;return(0,o.Jh)(this,function(i){switch(i.label){case 0:return r=this,[4,function(){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:if(!(null==navigator?void 0:navigator.serviceWorker))return[2,null];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,navigator.serviceWorker.ready];case 2:return[2,e.sent().active];case 3:return e.sent(),[2,null];case 4:return[2]}})})}()];case 1:if(r.activeServiceWorker=i.sent(),!this.activeServiceWorker)return[2];return this.sender=new h(this.activeServiceWorker),[4,this.sender._send("ping",{},800)];case 2:if(!(n=i.sent()))return[2];return(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0),[2]}})})},IndexedDBLocalPersistence.prototype.notifyServiceWorker=function(e){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(t){switch(t.label){case 0:var r;if(!this.sender||!this.activeServiceWorker||((null===(r=null==navigator?void 0:navigator.serviceWorker)||void 0===r?void 0:r.controller)||null)!==this.activeServiceWorker)return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)];case 2:case 3:return t.sent(),[3,4];case 4:return[2]}})})},IndexedDBLocalPersistence.prototype._isAvailable=function(){return(0,o.mG)(this,void 0,void 0,function(){var e;return(0,o.Jh)(this,function(t){switch(t.label){case 0:if(t.trys.push([0,4,,5]),!indexedDB)return[2,!1];return[4,_openDatabase()];case 1:return[4,_putObject(e=t.sent(),l,"1")];case 2:return t.sent(),[4,_deleteObject(e,l)];case 3:return t.sent(),[2,!0];case 4:return t.sent(),[3,5];case 5:return[2,!1]}})})},IndexedDBLocalPersistence.prototype._withPendingWrite=function(e){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(t){switch(t.label){case 0:this.pendingWrites++,t.label=1;case 1:return t.trys.push([1,,3,4]),[4,e()];case 2:return t.sent(),[3,4];case 3:return this.pendingWrites--,[7];case 4:return[2]}})})},IndexedDBLocalPersistence.prototype._set=function(e,t){return(0,o.mG)(this,void 0,void 0,function(){var r=this;return(0,o.Jh)(this,function(n){return[2,this._withPendingWrite(function(){return(0,o.mG)(r,void 0,void 0,function(){return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,this._withRetries(function(r){return _putObject(r,e,t)})];case 1:return r.sent(),this.localCache[e]=t,[2,this.notifyServiceWorker(e)]}})})})]})})},IndexedDBLocalPersistence.prototype._get=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,this._withRetries(function(t){return function(e,t){return(0,o.mG)(this,void 0,void 0,function(){var r,n;return(0,o.Jh)(this,function(i){switch(i.label){case 0:return r=getObjectStore(e,!1).get(t),[4,new m(r).toPromise()];case 1:return[2,void 0===(n=i.sent())?null:n.value]}})})}(t,e)})];case 1:return t=r.sent(),this.localCache[e]=t,[2,t]}})})},IndexedDBLocalPersistence.prototype._remove=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t=this;return(0,o.Jh)(this,function(r){return[2,this._withPendingWrite(function(){return(0,o.mG)(t,void 0,void 0,function(){return(0,o.Jh)(this,function(t){switch(t.label){case 0:return[4,this._withRetries(function(t){return _deleteObject(t,e)})];case 1:return t.sent(),delete this.localCache[e],[2,this.notifyServiceWorker(e)]}})})})]})})},IndexedDBLocalPersistence.prototype._poll=function(){return(0,o.mG)(this,void 0,void 0,function(){var e,t,r,n,i,s,a,u,c,l,d;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,this._withRetries(function(e){var t=getObjectStore(e,!1).getAll();return new m(t).toPromise()})];case 1:if(!(e=o.sent())||0!==this.pendingWrites)return[2,[]];for(n=0,t=[],r=new Set,i=e;n<i.length;n++)a=(s=i[n]).fbase_key,u=s.value,r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(u)&&(this.notifyListeners(a,u),t.push(a));for(c=0,l=Object.keys(this.localCache);c<l.length;c++)d=l[c],this.localCache[d]&&!r.has(d)&&(this.notifyListeners(d,null),t.push(d));return[2,t]}})})},IndexedDBLocalPersistence.prototype.notifyListeners=function(e,t){this.localCache[e]=t;var r=this.listeners[e];if(r)for(var n=0,i=Array.from(r);n<i.length;n++)(0,i[n])(t)},IndexedDBLocalPersistence.prototype.startPolling=function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(function(){return(0,o.mG)(e,void 0,void 0,function(){return(0,o.Jh)(this,function(e){return[2,this._poll()]})})},800)},IndexedDBLocalPersistence.prototype.stopPolling=function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)},IndexedDBLocalPersistence.prototype._addListener=function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)},IndexedDBLocalPersistence.prototype._removeListener=function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()},IndexedDBLocalPersistence.type="LOCAL"}();var g=new s.LL("auth","Firebase",_prodErrorMap()),_=new c.Yd("@firebase/auth");function _logError(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];_.logLevel<=c.in.ERROR&&_.error.apply(_,(0,o.ev)(["Auth (".concat(a.Jn,"): ").concat(e)],t,!1))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fail(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];throw createErrorInternal.apply(void 0,(0,o.ev)([e],t,!1))}function _createError(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return createErrorInternal.apply(void 0,(0,o.ev)([e],t,!1))}function createErrorInternal(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if("string"!=typeof e){var i=r[0],s=(0,o.ev)([],r.slice(1),!0);return s[0]&&(s[0].appName=e.name),(t=e._errorFactory).create.apply(t,(0,o.ev)([i],s,!1))}return g.create.apply(g,(0,o.ev)([e],r,!1))}function _assert(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(!e)throw createErrorInternal.apply(void 0,(0,o.ev)([t],r,!1))}function debugFail(e){var t="INTERNAL ASSERTION FAILED: "+e;throw _logError(t),Error(t)}function _getCurrentScheme(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var I=function(){function Delay(e,t){this.shortDelay=e,this.longDelay=t,t>e||debugFail("Short delay should be less than long delay!"),this.isMobile=(0,s.uI)()||(0,s.b$)()}return Delay.prototype.get=function(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===_getCurrentScheme()||"https:"===_getCurrentScheme()||(0,s.ru)()||"connection"in navigator))||navigator.onLine?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)},Delay}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _emulatorUrl(e,t){e.emulator||debugFail("Emulator should always be set here");var r=e.emulator.url;return t?"".concat(r).concat(t.startsWith("/")?t.slice(1):t):r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var y=function(){function FetchProvider(){}return FetchProvider.initialize=function(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)},FetchProvider.fetch=function(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")},FetchProvider.headers=function(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")},FetchProvider.response=function(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")},FetchProvider}(),T=((n={}).CREDENTIAL_MISMATCH="custom-token-mismatch",n.MISSING_CUSTOM_TOKEN="internal-error",n.INVALID_IDENTIFIER="invalid-email",n.MISSING_CONTINUE_URI="internal-error",n.INVALID_PASSWORD="wrong-password",n.MISSING_PASSWORD="missing-password",n.EMAIL_EXISTS="email-already-in-use",n.PASSWORD_LOGIN_DISABLED="operation-not-allowed",n.INVALID_IDP_RESPONSE="invalid-credential",n.INVALID_PENDING_TOKEN="invalid-credential",n.FEDERATED_USER_ID_ALREADY_LINKED="credential-already-in-use",n.MISSING_REQ_TYPE="internal-error",n.EMAIL_NOT_FOUND="user-not-found",n.RESET_PASSWORD_EXCEED_LIMIT="too-many-requests",n.EXPIRED_OOB_CODE="expired-action-code",n.INVALID_OOB_CODE="invalid-action-code",n.MISSING_OOB_CODE="internal-error",n.CREDENTIAL_TOO_OLD_LOGIN_AGAIN="requires-recent-login",n.INVALID_ID_TOKEN="invalid-user-token",n.TOKEN_EXPIRED="user-token-expired",n.USER_NOT_FOUND="user-token-expired",n.TOO_MANY_ATTEMPTS_TRY_LATER="too-many-requests",n.INVALID_CODE="invalid-verification-code",n.INVALID_SESSION_INFO="invalid-verification-id",n.INVALID_TEMPORARY_PROOF="invalid-credential",n.MISSING_SESSION_INFO="missing-verification-id",n.SESSION_EXPIRED="code-expired",n.MISSING_ANDROID_PACKAGE_NAME="missing-android-pkg-name",n.UNAUTHORIZED_DOMAIN="unauthorized-continue-uri",n.INVALID_OAUTH_CLIENT_ID="invalid-oauth-client-id",n.ADMIN_ONLY_OPERATION="admin-restricted-operation",n.INVALID_MFA_PENDING_CREDENTIAL="invalid-multi-factor-session",n.MFA_ENROLLMENT_NOT_FOUND="multi-factor-info-not-found",n.MISSING_MFA_ENROLLMENT_ID="missing-multi-factor-info",n.MISSING_MFA_PENDING_CREDENTIAL="missing-multi-factor-session",n.SECOND_FACTOR_EXISTS="second-factor-already-in-use",n.SECOND_FACTOR_LIMIT_EXCEEDED="maximum-second-factor-count-exceeded",n.BLOCKING_FUNCTION_ERROR_RESPONSE="internal-error",n.RECAPTCHA_NOT_ENABLED="recaptcha-not-enabled",n.MISSING_RECAPTCHA_TOKEN="missing-recaptcha-token",n.INVALID_RECAPTCHA_TOKEN="invalid-recaptcha-token",n.INVALID_RECAPTCHA_ACTION="invalid-recaptcha-action",n.MISSING_CLIENT_TYPE="missing-client-type",n.MISSING_RECAPTCHA_VERSION="missing-recaptcha-version",n.INVALID_RECAPTCHA_VERSION="invalid-recaptcha-version",n.INVALID_REQ_TYPE="invalid-req-type",n),A=new I(3e4,6e4);function _addTidIfNecessary(e,t){return e.tenantId&&!t.tenantId?(0,o.pi)((0,o.pi)({},t),{tenantId:e.tenantId}):t}function _performApiRequest(e,t,r,n,i){return void 0===i&&(i={}),(0,o.mG)(this,void 0,void 0,function(){var a=this;return(0,o.Jh)(this,function(u){return[2,_performFetchWithErrorHandling(e,i,function(){return(0,o.mG)(a,void 0,void 0,function(){var i,a,u,c;return(0,o.Jh)(this,function(l){switch(l.label){case 0:return i={},a={},n&&("GET"===t?a=n:i={body:JSON.stringify(n)}),u=(0,s.xO)((0,o.pi)({key:e.config.apiKey},a)).slice(1),[4,e._getAdditionalHeaders()];case 1:return(c=l.sent())["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode),[2,y.fetch()(_getFinalTarget(e,e.config.apiHost,r,u),(0,o.pi)({method:t,headers:c,referrerPolicy:"no-referrer"},i))]}})})})]})})}function _performFetchWithErrorHandling(e,t,r){return(0,o.mG)(this,void 0,void 0,function(){var n,i,a,u,c,l,d,h,p;return(0,o.Jh)(this,function(f){switch(f.label){case 0:e._canInitEmulator=!1,n=(0,o.pi)((0,o.pi)({},T),t),f.label=1;case 1:return f.trys.push([1,4,,5]),i=new b(e),[4,Promise.race([r(),i.promise])];case 2:return a=f.sent(),i.clearNetworkTimeout(),[4,a.json()];case 3:if("needConfirmation"in(u=f.sent()))throw _makeTaggedError(e,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return[2,u];if(l=(c=(a.ok?u.errorMessage:u.error.message).split(" : "))[0],d=c[1],"FEDERATED_USER_ID_ALREADY_LINKED"===l)throw _makeTaggedError(e,"credential-already-in-use",u);if("EMAIL_EXISTS"===l)throw _makeTaggedError(e,"email-already-in-use",u);if("USER_DISABLED"===l)throw _makeTaggedError(e,"user-disabled",u);if(h=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-"),d){var v,m;throw m=(0,o.pi)((0,o.pi)({},_prodErrorMap()),((v={})[h]=d,v)),new s.LL("auth","Firebase",m).create(h,{appName:e.name})}return _fail(e,h),[3,5];case 4:if((p=f.sent())instanceof s.ZR)throw p;return _fail(e,"network-request-failed",{message:String(p)}),[3,5];case 5:return[2]}})})}function _performSignInRequest(e,t,r,n,i){return void 0===i&&(i={}),(0,o.mG)(this,void 0,void 0,function(){var s;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,_performApiRequest(e,t,r,n,i)];case 1:return"mfaPendingCredential"in(s=o.sent())&&_fail(e,"multi-factor-auth-required",{_serverResponse:s}),[2,s]}})})}function _getFinalTarget(e,t,r,n){var i="".concat(t).concat(r,"?").concat(n);return e.config.emulator?_emulatorUrl(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var b=function(){function NetworkTimeout(e){var t=this;this.auth=e,this.timer=null,this.promise=new Promise(function(e,r){t.timer=setTimeout(function(){return r(_createError(t.auth,"network-request-failed"))},A.get())})}return NetworkTimeout.prototype.clearNetworkTimeout=function(){clearTimeout(this.timer)},NetworkTimeout}();function _makeTaggedError(e,t,r){var n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);var i=_createError(e,t,n);return i.customData._tokenResponse=r,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function utcTimestampToDateString(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function secondsStringToMilliseconds(e){return 1e3*Number(e)}function _parseToken(e){var t=e.split("."),r=t[0],n=t[1],i=t[2];if(void 0===r||void 0===n||void 0===i)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{var o=(0,s.tV)(n);if(!o)return _logError("Failed to decode base64 JWT payload"),null;return JSON.parse(o)}catch(e){return _logError("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _logoutIfInvalidated(e,t,r){return void 0===r&&(r=!1),(0,o.mG)(this,void 0,void 0,function(){var n;return(0,o.Jh)(this,function(i){switch(i.label){case 0:if(r)return[2,t];i.label=1;case 1:return i.trys.push([1,3,,6]),[4,t];case 2:return[2,i.sent()];case 3:var o;if(!((n=i.sent())instanceof s.ZR&&((o=n.code)==="auth/".concat("user-disabled")||o==="auth/".concat("user-token-expired")))||e.auth.currentUser!==e)return[3,5];return[4,e.auth.signOut()];case 4:i.sent(),i.label=5;case 5:throw n;case 6:return[2]}})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var P=function(){function ProactiveRefresh(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return ProactiveRefresh.prototype._start=function(){this.isRunning||(this.isRunning=!0,this.schedule())},ProactiveRefresh.prototype._stop=function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))},ProactiveRefresh.prototype.getInterval=function(e){if(e){var t,r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)},ProactiveRefresh.prototype.schedule=function(e){var t=this;if(void 0===e&&(e=!1),this.isRunning){var r=this.getInterval(e);this.timerId=setTimeout(function(){return(0,o.mG)(t,void 0,void 0,function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return[4,this.iteration()];case 1:return e.sent(),[2]}})})},r)}},ProactiveRefresh.prototype.iteration=function(){return(0,o.mG)(this,void 0,void 0,function(){var e;return(0,o.Jh)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.user.getIdToken(!0)];case 1:return t.sent(),[3,3];case 2:return(null==(e=t.sent())?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),[2];case 3:return this.schedule(),[2]}})})},ProactiveRefresh}(),k=function(){function UserMetadata(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}return UserMetadata.prototype._initializeTime=function(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)},UserMetadata.prototype._copy=function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()},UserMetadata.prototype.toJSON=function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}},UserMetadata}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _reloadWithoutSaving(e){var t;return(0,o.mG)(this,void 0,void 0,function(){var r,n,i,s,a,u,c,l,d;return(0,o.Jh)(this,function(h){switch(h.label){case 0:return r=e.auth,[4,e.getIdToken()];case 1:return n=h.sent(),[4,_logoutIfInvalidated(e,function(e,t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(r){return[2,_performApiRequest(e,"POST","/v1/accounts:lookup",t)]})})}(r,{idToken:n}))];case 2:var p;return _assert(null==(i=h.sent())?void 0:i.users.length,r,"internal-error"),s=i.users[0],e._notifyReloadListener(s),a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map(function(e){var t=e.providerId,r=(0,o._T)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}}):[],p=e.providerData.filter(function(e){return!a.some(function(t){return t.providerId===e.providerId})}),u=(0,o.ev)((0,o.ev)([],p,!0),a,!0),c=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(null==u?void 0:u.length),d=!!c&&l,Object.assign(e,{uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new k(s.createdAt,s.lastLoginAt),isAnonymous:d}),[2]}})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var w=function(){function StsTokenManager(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return Object.defineProperty(StsTokenManager.prototype,"isExpired",{get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4},enumerable:!1,configurable:!0}),StsTokenManager.prototype.updateFromServerResponse=function(e){_assert(e.idToken,"internal-error"),_assert(void 0!==e.idToken,"internal-error"),_assert(void 0!==e.refreshToken,"internal-error");var t,r="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):(_assert(t=_parseToken(e.idToken),"internal-error"),_assert(void 0!==t.exp,"internal-error"),_assert(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat));this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)},StsTokenManager.prototype.getToken=function(e,t){return void 0===t&&(t=!1),(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(r){switch(r.label){case 0:if(_assert(!this.accessToken||this.refreshToken,e,"user-token-expired"),!t&&this.accessToken&&!this.isExpired)return[2,this.accessToken];if(!this.refreshToken)return[3,2];return[4,this.refresh(e,this.refreshToken)];case 1:return r.sent(),[2,this.accessToken];case 2:return[2,null]}})})},StsTokenManager.prototype.clearRefreshToken=function(){this.refreshToken=null},StsTokenManager.prototype.refresh=function(e,t){return(0,o.mG)(this,void 0,void 0,function(){var r,n,i,a;return(0,o.Jh)(this,function(u){switch(u.label){case 0:return[4,/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t){return(0,o.mG)(this,void 0,void 0,function(){var r,n=this;return(0,o.Jh)(this,function(i){switch(i.label){case 0:return[4,_performFetchWithErrorHandling(e,{},function(){return(0,o.mG)(n,void 0,void 0,function(){var r,n,i,a,u,c;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return r=(0,s.xO)({grant_type:"refresh_token",refresh_token:t}).slice(1),i=(n=e.config).tokenApiHost,a=n.apiKey,u=_getFinalTarget(e,i,"/v1/token","key=".concat(a)),[4,e._getAdditionalHeaders()];case 1:return(c=o.sent())["Content-Type"]="application/x-www-form-urlencoded",[2,y.fetch()(u,{method:"POST",headers:c,body:r})]}})})})];case 1:return[2,{accessToken:(r=i.sent()).access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}]}})})}(e,t)];case 1:return n=(r=u.sent()).accessToken,i=r.refreshToken,a=r.expiresIn,this.updateTokensAndExpiration(n,i,Number(a)),[2]}})})},StsTokenManager.prototype.updateTokensAndExpiration=function(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r},StsTokenManager.fromJSON=function(e,t){var r=t.refreshToken,n=t.accessToken,i=t.expirationTime,o=new StsTokenManager;return r&&(_assert("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),n&&(_assert("string"==typeof n,"internal-error",{appName:e}),o.accessToken=n),i&&(_assert("number"==typeof i,"internal-error",{appName:e}),o.expirationTime=i),o},StsTokenManager.prototype.toJSON=function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}},StsTokenManager.prototype._assign=function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime},StsTokenManager.prototype._clone=function(){return Object.assign(new StsTokenManager,this.toJSON())},StsTokenManager.prototype._performRefresh=function(){return debugFail("not implemented")},StsTokenManager}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function assertStringOrUndefined(e,t){_assert("string"==typeof e||void 0===e,"internal-error",{appName:t})}var R=function(){function UserImpl(e){var t=e.uid,r=e.auth,n=e.stsTokenManager,i=(0,o._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new P(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?(0,o.ev)([],i.providerData,!0):[],this.metadata=new k(i.createdAt||void 0,i.lastLoginAt||void 0)}return UserImpl.prototype.getIdToken=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,_logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,e))];case 1:if(_assert(t=r.sent(),this.auth,"internal-error"),!(this.accessToken!==t))return[3,3];return this.accessToken=t,[4,this.auth._persistUserIfCurrent(this)];case 2:r.sent(),this.auth._notifyListenersIfCurrent(this),r.label=3;case 3:return[2,t]}})})},UserImpl.prototype.getIdTokenResult=function(e){return function(e,t){return void 0===t&&(t=!1),(0,o.mG)(this,void 0,void 0,function(){var r,n,i,a,u;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,(r=(0,s.m9)(e)).getIdToken(t)];case 1:return _assert((i=_parseToken(n=o.sent()))&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error"),u=null==(a="object"==typeof i.firebase?i.firebase:void 0)?void 0:a.sign_in_provider,[2,{claims:i,token:n,authTime:utcTimestampToDateString(secondsStringToMilliseconds(i.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(i.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(i.exp)),signInProvider:u||null,signInSecondFactor:(null==a?void 0:a.sign_in_second_factor)||null}]}})})}(this,e)},UserImpl.prototype.reload=function(){return function(e){return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,_reloadWithoutSaving(t=(0,s.m9)(e))];case 1:return r.sent(),[4,t.auth._persistUserIfCurrent(t)];case 2:return r.sent(),t.auth._notifyListenersIfCurrent(t),[2]}})})}(this)},UserImpl.prototype._assign=function(e){this!==e&&(_assert(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(function(e){return(0,o.pi)({},e)}),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))},UserImpl.prototype._clone=function(e){var t=new UserImpl((0,o.pi)((0,o.pi)({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t},UserImpl.prototype._onReload=function(e){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)},UserImpl.prototype._notifyReloadListener=function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e},UserImpl.prototype._startProactiveRefresh=function(){this.proactiveRefresh._start()},UserImpl.prototype._stopProactiveRefresh=function(){this.proactiveRefresh._stop()},UserImpl.prototype._updateTokensIfNecessary=function(e,t){return void 0===t&&(t=!1),(0,o.mG)(this,void 0,void 0,function(){var r;return(0,o.Jh)(this,function(n){switch(n.label){case 0:if(r=!1,e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),!t)return[3,2];return[4,_reloadWithoutSaving(this)];case 1:n.sent(),n.label=2;case 2:return[4,this.auth._persistUserIfCurrent(this)];case 3:return n.sent(),r&&this.auth._notifyListenersIfCurrent(this),[2]}})})},UserImpl.prototype.delete=function(){return(0,o.mG)(this,void 0,void 0,function(){var e;return(0,o.Jh)(this,function(t){switch(t.label){case 0:return[4,this.getIdToken()];case 1:return e=t.sent(),[4,_logoutIfInvalidated(this,/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(r){return[2,_performApiRequest(e,"POST","/v1/accounts:delete",t)]})})}(this.auth,{idToken:e}))];case 2:return t.sent(),this.stsTokenManager.clearRefreshToken(),[2,this.auth.signOut()]}})})},UserImpl.prototype.toJSON=function(){return(0,o.pi)((0,o.pi)({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(function(e){return(0,o.pi)({},e)}),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})},Object.defineProperty(UserImpl.prototype,"refreshToken",{get:function(){return this.stsTokenManager.refreshToken||""},enumerable:!1,configurable:!0}),UserImpl._fromJSON=function(e,t){var r,n,i,s,a,u,c,l,d=null!==(r=t.displayName)&&void 0!==r?r:void 0,h=null!==(n=t.email)&&void 0!==n?n:void 0,p=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,v=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(u=t._redirectEventId)&&void 0!==u?u:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,_=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,I=t.uid,y=t.emailVerified,T=t.isAnonymous,A=t.providerData,b=t.stsTokenManager;_assert(I&&b,e,"internal-error");var P=w.fromJSON(this.name,b);_assert("string"==typeof I,e,"internal-error"),assertStringOrUndefined(d,e.name),assertStringOrUndefined(h,e.name),_assert("boolean"==typeof y,e,"internal-error"),_assert("boolean"==typeof T,e,"internal-error"),assertStringOrUndefined(p,e.name),assertStringOrUndefined(f,e.name),assertStringOrUndefined(v,e.name),assertStringOrUndefined(m,e.name),assertStringOrUndefined(g,e.name),assertStringOrUndefined(_,e.name);var k=new UserImpl({uid:I,auth:e,email:h,emailVerified:y,displayName:d,isAnonymous:T,photoURL:f,phoneNumber:p,tenantId:v,stsTokenManager:P,createdAt:g,lastLoginAt:_});return A&&Array.isArray(A)&&(k.providerData=A.map(function(e){return(0,o.pi)({},e)})),m&&(k._redirectEventId=m),k},UserImpl._fromIdTokenResponse=function(e,t,r){return void 0===r&&(r=!1),(0,o.mG)(this,void 0,void 0,function(){var n,i;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return(n=new w).updateFromServerResponse(t),[4,_reloadWithoutSaving(i=new UserImpl({uid:t.localId,auth:e,stsTokenManager:n,isAnonymous:r}))];case 1:return o.sent(),[2,i]}})})},UserImpl}(),E=new Map;function _getInstance(e){e instanceof Function||debugFail("Expected a class definition");var t=E.get(e);return t?t instanceof e||debugFail("Instance stored in cache mismatched with class"):(t=new e,E.set(e,t)),t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var S=function(){function InMemoryPersistence(){this.type="NONE",this.storage={}}return InMemoryPersistence.prototype._isAvailable=function(){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(e){return[2,!0]})})},InMemoryPersistence.prototype._set=function(e,t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(r){return this.storage[e]=t,[2]})})},InMemoryPersistence.prototype._get=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(r){return[2,void 0===(t=this.storage[e])?null:t]})})},InMemoryPersistence.prototype._remove=function(e){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(t){return delete this.storage[e],[2]})})},InMemoryPersistence.prototype._addListener=function(e,t){},InMemoryPersistence.prototype._removeListener=function(e,t){},InMemoryPersistence.type="NONE",InMemoryPersistence}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _persistenceKeyName(e,t,r){return"".concat("firebase",":").concat(e,":").concat(t,":").concat(r)}var C=function(){function PersistenceUserManager(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;var n=this.auth,i=n.config,o=n.name;this.fullUserKey=_persistenceKeyName(this.userKey,i.apiKey,o),this.fullPersistenceKey=_persistenceKeyName("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return PersistenceUserManager.prototype.setCurrentUser=function(e){return this.persistence._set(this.fullUserKey,e.toJSON())},PersistenceUserManager.prototype.getCurrentUser=function(){return(0,o.mG)(this,void 0,void 0,function(){var e;return(0,o.Jh)(this,function(t){switch(t.label){case 0:return[4,this.persistence._get(this.fullUserKey)];case 1:return[2,(e=t.sent())?R._fromJSON(this.auth,e):null]}})})},PersistenceUserManager.prototype.removeCurrentUser=function(){return this.persistence._remove(this.fullUserKey)},PersistenceUserManager.prototype.savePersistenceForRedirect=function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)},PersistenceUserManager.prototype.setPersistence=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(r){switch(r.label){case 0:if(this.persistence===e)return[2];return[4,this.getCurrentUser()];case 1:return t=r.sent(),[4,this.removeCurrentUser()];case 2:if(r.sent(),this.persistence=e,t)return[2,this.setCurrentUser(t)];return[2]}})})},PersistenceUserManager.prototype.delete=function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)},PersistenceUserManager.create=function(e,t,r){return void 0===r&&(r="authUser"),(0,o.mG)(this,void 0,void 0,function(){var n,i,s,a,u,c,l,d,h,p,f=this;return(0,o.Jh)(this,function(v){switch(v.label){case 0:if(!t.length)return[2,new PersistenceUserManager(_getInstance(S),e,r)];return[4,Promise.all(t.map(function(e){return(0,o.mG)(f,void 0,void 0,function(){return(0,o.Jh)(this,function(t){switch(t.label){case 0:return[4,e._isAvailable()];case 1:if(t.sent())return[2,e];return[2,void 0]}})})}))];case 1:i=(n=v.sent().filter(function(e){return e}))[0]||_getInstance(S),s=_persistenceKeyName(r,e.config.apiKey,e.name),a=null,u=0,c=t,v.label=2;case 2:if(!(u<c.length))return[3,7];l=c[u],v.label=3;case 3:return v.trys.push([3,5,,6]),[4,l._get(s)];case 4:if(d=v.sent())return h=R._fromJSON(e,d),l!==i&&(a=h),i=l,[3,7];return[3,6];case 5:return v.sent(),[3,6];case 6:return u++,[3,2];case 7:if(p=n.filter(function(e){return e._shouldAllowMigration}),!i._shouldAllowMigration||!p.length)return[2,new PersistenceUserManager(i,e,r)];if(i=p[0],!a)return[3,9];return[4,i._set(s,a.toJSON())];case 8:v.sent(),v.label=9;case 9:return[4,Promise.all(t.map(function(e){return(0,o.mG)(f,void 0,void 0,function(){return(0,o.Jh)(this,function(t){switch(t.label){case 0:if(!(e!==i))return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e._remove(s)];case 2:case 3:return t.sent(),[3,4];case 4:return[2]}})})}))];case 10:return v.sent(),[2,new PersistenceUserManager(i,e,r)]}})})},PersistenceUserManager}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getBrowserName(e){var t,r,n=e.toLowerCase();if(n.includes("opera/")||n.includes("opr/")||n.includes("opios/"))return"Opera";if(_isIEMobile(n))return"IEMobile";if(n.includes("msie")||n.includes("trident/"))return"IE";if(n.includes("edge/"))return"Edge";if(void 0===(t=n)&&(t=(0,s.z$)()),/firefox\//i.test(t))return"Firefox";if(n.includes("silk/"))return"Silk";if(_isBlackBerry(n))return"Blackberry";if(_isWebOS(n))return"Webos";if(_isSafari(n))return"Safari";if((n.includes("chrome/")||(void 0===(r=n)&&(r=(0,s.z$)()),/crios\//i.test(r)))&&!n.includes("edge/"))return"Chrome";if(_isAndroid(n))return"Android";var i=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return(null==i?void 0:i.length)===2?i[1]:"Other"}function _isSafari(e){void 0===e&&(e=(0,s.z$)());var t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function _isIEMobile(e){return void 0===e&&(e=(0,s.z$)()),/iemobile/i.test(e)}function _isAndroid(e){return void 0===e&&(e=(0,s.z$)()),/android/i.test(e)}function _isBlackBerry(e){return void 0===e&&(e=(0,s.z$)()),/blackberry/i.test(e)}function _isWebOS(e){return void 0===e&&(e=(0,s.z$)()),/webos/i.test(e)}function _isIOS(e){return void 0===e&&(e=(0,s.z$)()),/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getClientVersion(e,t){switch(void 0===t&&(t=[]),e){case"Browser":r=_getBrowserName((0,s.z$)());break;case"Worker":r="".concat(_getBrowserName((0,s.z$)()),"-").concat(e);break;default:r=e}var r,n=t.length?t.join(","):"FirebaseCore-web";return"".concat(r,"/").concat("JsCore","/").concat(a.Jn,"/").concat(n)}function getRecaptchaConfig(e,t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(r){return[2,_performApiRequest(e,"GET","/v2/recaptchaConfig",_addTidIfNecessary(e,t))]})})}function isEnterprise(e){return void 0!==e&&void 0!==e.enterprise}var RecaptchaConfig=function(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState})},O=function(){function RecaptchaEnterpriseVerifier(e){this.type="recaptcha-enterprise",this.auth=_castAuth(e)}return RecaptchaEnterpriseVerifier.prototype.verify=function(e,t){return void 0===e&&(e="verify"),void 0===t&&(t=!1),(0,o.mG)(this,void 0,void 0,function(){function retrieveRecaptchaToken(t,r,n){var i=window.grecaptcha;isEnterprise(i)?i.enterprise.ready(function(){i.enterprise.execute(t,{action:e}).then(function(e){r(e)}).catch(function(){r("NO_RECAPTCHA")})}):n(Error("No reCAPTCHA enterprise script loaded."))}var r=this;return(0,o.Jh)(this,function(e){return[2,new Promise(function(e,n){(function(e){return(0,o.mG)(this,void 0,void 0,function(){var r=this;return(0,o.Jh)(this,function(n){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return[2,e._agentRecaptchaConfig.siteKey];if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return[2,e._tenantRecaptchaConfigs[e.tenantId].siteKey]}return[2,new Promise(function(t,n){return(0,o.mG)(r,void 0,void 0,function(){return(0,o.Jh)(this,function(r){return getRecaptchaConfig(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(function(r){if(void 0===r.recaptchaKey)n(Error("recaptcha Enterprise site key undefined"));else{var i=new RecaptchaConfig(r);return null==e.tenantId?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,t(i.siteKey)}}).catch(function(e){n(e)}),[2]})})})]})})})(r.auth).then(function(r){if(!t&&isEnterprise(window.grecaptcha))retrieveRecaptchaToken(r,e,n);else{var i;if("undefined"==typeof window){n(Error("RecaptchaVerifier is only supported in browser"));return}(i="https://www.google.com/recaptcha/enterprise.js?render="+r,new Promise(function(e,t){var r,n,o=document.createElement("script");o.setAttribute("src",i),o.onload=e,o.onerror=function(e){var r=_createError("internal-error");r.customData=e,t(r)},o.type="text/javascript",o.charset="UTF-8",(null!==(n=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==n?n:document).appendChild(o)})).then(function(){retrieveRecaptchaToken(r,e,n)}).catch(function(e){n(e)})}}).catch(function(e){n(e)})})]})})},RecaptchaEnterpriseVerifier}();function injectRecaptchaFields(e,t,r,n){return void 0===n&&(n=!1),(0,o.mG)(this,void 0,void 0,function(){var i,s,a;return(0,o.Jh)(this,function(u){switch(u.label){case 0:i=new O(e),u.label=1;case 1:return u.trys.push([1,3,,5]),[4,i.verify(r)];case 2:case 4:return s=u.sent(),[3,5];case 3:return u.sent(),[4,i.verify(r,!0)];case 5:return a=(0,o.pi)({},t),n?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),[2,a]}})})}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var N=function(){function AuthMiddlewareQueue(e){this.auth=e,this.queue=[]}return AuthMiddlewareQueue.prototype.pushCallback=function(e,t){var r=this,wrappedCallback=function(t){return new Promise(function(r,n){try{var i=e(t);r(i)}catch(e){n(e)}})};wrappedCallback.onAbort=t,this.queue.push(wrappedCallback);var n=this.queue.length-1;return function(){r.queue[n]=function(){return Promise.resolve()}}},AuthMiddlewareQueue.prototype.runMiddleware=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t,r,n,i,s,a,u,c;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(this.auth.currentUser===e)return[2];t=[],o.label=1;case 1:o.trys.push([1,6,,7]),r=0,n=this.queue,o.label=2;case 2:if(!(r<n.length))return[3,5];return[4,(i=n[r])(e)];case 3:o.sent(),i.onAbort&&t.push(i.onAbort),o.label=4;case 4:return r++,[3,2];case 5:return[3,7];case 6:for(s=o.sent(),t.reverse(),a=0,u=t;a<u.length;a++){c=u[a];try{c()}catch(e){}}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==s?void 0:s.message});case 7:return[2]}})})},AuthMiddlewareQueue}(),M=function(){function AuthImpl(e,t,r,n){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new L(this),this.idTokenSubscription=new L(this),this.beforeStateQueue=new N(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=g,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}return AuthImpl.prototype._initializeWithPersistence=function(e,t){var r=this;return t&&(this._popupRedirectResolver=_getInstance(t)),this._initializationPromise=this.queue(function(){return(0,o.mG)(r,void 0,void 0,function(){var r,n,i;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(this._deleted)return[2];return r=this,[4,C.create(this,e)];case 1:if(r.persistenceManager=o.sent(),this._deleted)return[2];if(!(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively))return[3,5];o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this._popupRedirectResolver._initialize(this)];case 3:case 4:return o.sent(),[3,5];case 5:return[4,this.initializeCurrentUser(t)];case 6:if(o.sent(),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted)return[2];return this._isInitialized=!0,[2]}})})}),this._initializationPromise},AuthImpl.prototype._onStorageEvent=function(){return(0,o.mG)(this,void 0,void 0,function(){var e;return(0,o.Jh)(this,function(t){switch(t.label){case 0:if(this._deleted)return[2];return[4,this.assertedPersistence.getCurrentUser()];case 1:if(e=t.sent(),!this.currentUser&&!e)return[2];if(!(this.currentUser&&e&&this.currentUser.uid===e.uid))return[3,3];return this._currentUser._assign(e),[4,this.currentUser.getIdToken()];case 2:case 4:return t.sent(),[2];case 3:return[4,this._updateCurrentUser(e,!0)]}})})},AuthImpl.prototype.initializeCurrentUser=function(e){var t;return(0,o.mG)(this,void 0,void 0,function(){var r,n,i,s,a,u,c;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,this.assertedPersistence.getCurrentUser()];case 1:if(n=r=o.sent(),i=!1,!(e&&this.config.authDomain))return[3,4];return[4,this.getOrInitRedirectPersistenceManager()];case 2:return o.sent(),s=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,a=null==n?void 0:n._redirectEventId,[4,this.tryRedirectSignIn(e)];case 3:u=o.sent(),(!s||s===a)&&(null==u?void 0:u.user)&&(n=u.user,i=!0),o.label=4;case 4:if(!n)return[2,this.directlySetCurrentUser(null)];if(n._redirectEventId)return[3,9];if(!i)return[3,8];o.label=5;case 5:return o.trys.push([5,7,,8]),[4,this.beforeStateQueue.runMiddleware(n)];case 6:return o.sent(),[3,8];case 7:return c=o.sent(),n=r,this._popupRedirectResolver._overrideRedirectResult(this,function(){return Promise.reject(c)}),[3,8];case 8:if(n)return[2,this.reloadAndSetCurrentUserOrClear(n)];return[2,this.directlySetCurrentUser(null)];case 9:return _assert(this._popupRedirectResolver,this,"argument-error"),[4,this.getOrInitRedirectPersistenceManager()];case 10:if(o.sent(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId)return[2,this.directlySetCurrentUser(n)];return[2,this.reloadAndSetCurrentUserOrClear(n)]}})})},AuthImpl.prototype.tryRedirectSignIn=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(r){switch(r.label){case 0:t=null,r.label=1;case 1:return r.trys.push([1,3,,5]),[4,this._popupRedirectResolver._completeRedirectFn(this,e,!0)];case 2:return t=r.sent(),[3,5];case 3:return r.sent(),[4,this._setRedirectUser(null)];case 4:return r.sent(),[3,5];case 5:return[2,t]}})})},AuthImpl.prototype.reloadAndSetCurrentUserOrClear=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,_reloadWithoutSaving(e)];case 1:return r.sent(),[3,3];case 2:if((null==(t=r.sent())?void 0:t.code)!=="auth/".concat("network-request-failed"))return[2,this.directlySetCurrentUser(null)];return[3,3];case 3:return[2,this.directlySetCurrentUser(e)]}})})},AuthImpl.prototype.useDeviceLanguage=function(){this.languageCode=function(){if("undefined"==typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()},AuthImpl.prototype._delete=function(){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(e){return this._deleted=!0,[2]})})},AuthImpl.prototype.updateCurrentUser=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(r){return(t=e?(0,s.m9)(e):null)&&_assert(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),[2,this._updateCurrentUser(t&&t._clone(this))]})})},AuthImpl.prototype._updateCurrentUser=function(e,t){return void 0===t&&(t=!1),(0,o.mG)(this,void 0,void 0,function(){var r=this;return(0,o.Jh)(this,function(n){switch(n.label){case 0:if(this._deleted)return[2];if(e&&_assert(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t)return[3,2];return[4,this.beforeStateQueue.runMiddleware(e)];case 1:n.sent(),n.label=2;case 2:return[2,this.queue(function(){return(0,o.mG)(r,void 0,void 0,function(){return(0,o.Jh)(this,function(t){switch(t.label){case 0:return[4,this.directlySetCurrentUser(e)];case 1:return t.sent(),this.notifyAuthListeners(),[2]}})})})]}})})},AuthImpl.prototype.signOut=function(){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return[4,this.beforeStateQueue.runMiddleware(null)];case 1:if(e.sent(),!(this.redirectPersistenceManager||this._popupRedirectResolver))return[3,3];return[4,this._setRedirectUser(null)];case 2:e.sent(),e.label=3;case 3:return[2,this._updateCurrentUser(null,!0)]}})})},AuthImpl.prototype.setPersistence=function(e){var t=this;return this.queue(function(){return(0,o.mG)(t,void 0,void 0,function(){return(0,o.Jh)(this,function(t){switch(t.label){case 0:return[4,this.assertedPersistence.setPersistence(_getInstance(e))];case 1:return t.sent(),[2]}})})})},AuthImpl.prototype.initializeRecaptchaConfig=function(){return(0,o.mG)(this,void 0,void 0,function(){var e,t;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,getRecaptchaConfig(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"})];case 1:return e=r.sent(),t=new RecaptchaConfig(e),null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled&&new O(this).verify(),[2]}})})},AuthImpl.prototype._getRecaptchaConfig=function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]},AuthImpl.prototype._getPersistence=function(){return this.assertedPersistence.persistence.type},AuthImpl.prototype._updateErrorMap=function(e){this._errorFactory=new s.LL("auth","Firebase",e())},AuthImpl.prototype.onAuthStateChanged=function(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)},AuthImpl.prototype.beforeAuthStateChanged=function(e,t){return this.beforeStateQueue.pushCallback(e,t)},AuthImpl.prototype.onIdTokenChanged=function(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)},AuthImpl.prototype.toJSON=function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}},AuthImpl.prototype._setRedirectUser=function(e,t){return(0,o.mG)(this,void 0,void 0,function(){var r;return(0,o.Jh)(this,function(n){switch(n.label){case 0:return[4,this.getOrInitRedirectPersistenceManager(t)];case 1:return r=n.sent(),[2,null===e?r.removeCurrentUser():r.setCurrentUser(e)]}})})},AuthImpl.prototype.getOrInitRedirectPersistenceManager=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t,r,n;return(0,o.Jh)(this,function(i){switch(i.label){case 0:if(this.redirectPersistenceManager)return[3,3];return _assert(t=e&&_getInstance(e)||this._popupRedirectResolver,this,"argument-error"),r=this,[4,C.create(this,[_getInstance(t._redirectPersistence)],"redirectUser")];case 1:return r.redirectPersistenceManager=i.sent(),n=this,[4,this.redirectPersistenceManager.getCurrentUser()];case 2:n.redirectUser=i.sent(),i.label=3;case 3:return[2,this.redirectPersistenceManager]}})})},AuthImpl.prototype._redirectUserForId=function(e){var t,r;return(0,o.mG)(this,void 0,void 0,function(){var n=this;return(0,o.Jh)(this,function(i){switch(i.label){case 0:if(!this._isInitialized)return[3,2];return[4,this.queue(function(){return(0,o.mG)(n,void 0,void 0,function(){return(0,o.Jh)(this,function(e){return[2]})})})];case 1:i.sent(),i.label=2;case 2:if((null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e)return[2,this._currentUser];if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)===e)return[2,this.redirectUser];return[2,null]}})})},AuthImpl.prototype._persistUserIfCurrent=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t=this;return(0,o.Jh)(this,function(r){return e===this.currentUser?[2,this.queue(function(){return(0,o.mG)(t,void 0,void 0,function(){return(0,o.Jh)(this,function(t){return[2,this.directlySetCurrentUser(e)]})})})]:[2]})})},AuthImpl.prototype._notifyListenersIfCurrent=function(e){e===this.currentUser&&this.notifyAuthListeners()},AuthImpl.prototype._key=function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)},AuthImpl.prototype._startProactiveRefresh=function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()},AuthImpl.prototype._stopProactiveRefresh=function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()},Object.defineProperty(AuthImpl.prototype,"_currentUser",{get:function(){return this.currentUser},enumerable:!1,configurable:!0}),AuthImpl.prototype.notifyAuthListeners=function(){if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var e,t,r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}},AuthImpl.prototype.registerStateListener=function(e,t,r,n){var i=this;if(this._deleted)return function(){};var o="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return(_assert(s,this,"internal-error"),s.then(function(){return o(i.currentUser)}),"function"==typeof t)?e.addObserver(t,r,n):e.addObserver(t)},AuthImpl.prototype.directlySetCurrentUser=function(e){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(t){switch(t.label){case 0:if(this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,!e)return[3,2];return[4,this.assertedPersistence.setCurrentUser(e)];case 1:return t.sent(),[3,4];case 2:return[4,this.assertedPersistence.removeCurrentUser()];case 3:t.sent(),t.label=4;case 4:return[2]}})})},AuthImpl.prototype.queue=function(e){return this.operations=this.operations.then(e,e),this.operations},Object.defineProperty(AuthImpl.prototype,"assertedPersistence",{get:function(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager},enumerable:!1,configurable:!0}),AuthImpl.prototype._logFramework=function(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))},AuthImpl.prototype._getFrameworks=function(){return this.frameworks},AuthImpl.prototype._getAdditionalHeaders=function(){var e;return(0,o.mG)(this,void 0,void 0,function(){var t,r,n,i;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return(i={})["X-Client-Version"]=this.clientVersion,t=i,this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId),[4,null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader()];case 1:return(r=o.sent())&&(t["X-Firebase-Client"]=r),[4,this._getAppCheckToken()];case 2:return(n=o.sent())&&(t["X-Firebase-AppCheck"]=n),[2,t]}})})},AuthImpl.prototype._getAppCheckToken=function(){var e;return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken()];case 1:return(null==(t=r.sent())?void 0:t.error)&&function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];_.logLevel<=c.in.WARN&&_.warn.apply(_,(0,o.ev)(["Auth (".concat(a.Jn,"): ").concat(e)],t,!1))}("Error while retrieving App Check token: ".concat(t.error)),[2,null==t?void 0:t.token]}})})},AuthImpl}();function _castAuth(e){return(0,s.m9)(e)}var L=function(){function Subscription(e){var t=this;this.auth=e,this.observer=null,this.addObserver=(0,s.ne)(function(e){return t.observer=e})}return Object.defineProperty(Subscription.prototype,"next",{get:function(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)},enumerable:!1,configurable:!0}),Subscription}(),U=function(){function AuthCredential(e,t){this.providerId=e,this.signInMethod=t}return AuthCredential.prototype.toJSON=function(){return debugFail("not implemented")},AuthCredential.prototype._getIdTokenResponse=function(e){return debugFail("not implemented")},AuthCredential.prototype._linkToIdToken=function(e,t){return debugFail("not implemented")},AuthCredential.prototype._getReauthenticationResolver=function(e){return debugFail("not implemented")},AuthCredential}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function signInWithPassword(e,t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(r){return[2,_performSignInRequest(e,"POST","/v1/accounts:signInWithPassword",_addTidIfNecessary(e,t))]})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var G=function(e){function EmailAuthCredential(t,r,n,i){void 0===i&&(i=null);var o=e.call(this,"password",n)||this;return o._email=t,o._password=r,o._tenantId=i,o}return(0,o.ZT)(EmailAuthCredential,e),EmailAuthCredential._fromEmailAndPassword=function(e,t){return new EmailAuthCredential(e,t,"password")},EmailAuthCredential._fromEmailAndCode=function(e,t,r){return void 0===r&&(r=null),new EmailAuthCredential(e,t,"emailLink",r)},EmailAuthCredential.prototype.toJSON=function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}},EmailAuthCredential.fromJSON=function(e){var t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null},EmailAuthCredential.prototype._getIdTokenResponse=function(e){var t;return(0,o.mG)(this,void 0,void 0,function(){var r,n=this;return(0,o.Jh)(this,function(i){switch(i.label){case 0:switch(this.signInMethod){case"password":return[3,1];case"emailLink":return[3,4]}return[3,5];case 1:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled))return[3,3];return[4,injectRecaptchaFields(e,r,"signInWithPassword")];case 2:return[2,signInWithPassword(e,i.sent())];case 3:return[2,signInWithPassword(e,r).catch(function(t){return(0,o.mG)(n,void 0,void 0,function(){return(0,o.Jh)(this,function(n){switch(n.label){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token"))return[3,2];return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),[4,injectRecaptchaFields(e,r,"signInWithPassword")];case 1:return[2,signInWithPassword(e,n.sent())];case 2:return[2,Promise.reject(t)]}})})})];case 4:return[2,/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(r){return[2,_performSignInRequest(e,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(e,t))]})})}(e,{email:this._email,oobCode:this._password})];case 5:_fail(e,"internal-error"),i.label=6;case 6:return[2]}})})},EmailAuthCredential.prototype._linkToIdToken=function(e,t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(r){switch(this.signInMethod){case"password":return[2,function(e,t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(r){return[2,_performApiRequest(e,"POST","/v1/accounts:update",t)]})})}(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password})];case"emailLink":return[2,function(e,t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(r){return[2,_performSignInRequest(e,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(e,t))]})})}(e,{idToken:t,email:this._email,oobCode:this._password})];default:_fail(e,"internal-error")}return[2]})})},EmailAuthCredential.prototype._getReauthenticationResolver=function(e){return this._getIdTokenResponse(e)},EmailAuthCredential}(U);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function signInWithIdp(e,t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(r){return[2,_performSignInRequest(e,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(e,t))]})})}var D=function(e){function OAuthCredential(){var t=null!==e&&e.apply(this,arguments)||this;return t.pendingToken=null,t}return(0,o.ZT)(OAuthCredential,e),OAuthCredential._fromParams=function(e){var t=new OAuthCredential(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):_fail("argument-error"),t},OAuthCredential.prototype.toJSON=function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}},OAuthCredential.fromJSON=function(e){var t="string"==typeof e?JSON.parse(e):e,r=t.providerId,n=t.signInMethod,i=(0,o._T)(t,["providerId","signInMethod"]);if(!r||!n)return null;var s=new OAuthCredential(r,n);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s},OAuthCredential.prototype._getIdTokenResponse=function(e){return signInWithIdp(e,this.buildRequest())},OAuthCredential.prototype._linkToIdToken=function(e,t){var r=this.buildRequest();return r.idToken=t,signInWithIdp(e,r)},OAuthCredential.prototype._getReauthenticationResolver=function(e){var t=this.buildRequest();return t.autoCreate=!1,signInWithIdp(e,t)},OAuthCredential.prototype.buildRequest=function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,s.xO)(t)}return e},OAuthCredential}(U),F=((i={}).USER_NOT_FOUND="user-not-found",i);!function(e){function PhoneAuthCredential(t){var r=e.call(this,"phone","phone")||this;return r.params=t,r}(0,o.ZT)(PhoneAuthCredential,e),PhoneAuthCredential._fromVerification=function(e,t){return new PhoneAuthCredential({verificationId:e,verificationCode:t})},PhoneAuthCredential._fromTokenResponse=function(e,t){return new PhoneAuthCredential({phoneNumber:e,temporaryProof:t})},PhoneAuthCredential.prototype._getIdTokenResponse=function(e){return function(e,t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(r){return[2,_performSignInRequest(e,"POST","/v1/accounts:signInWithPhoneNumber",_addTidIfNecessary(e,t))]})})}(e,this._makeVerificationRequest())},PhoneAuthCredential.prototype._linkToIdToken=function(e,t){return function(e,t){return(0,o.mG)(this,void 0,void 0,function(){var r;return(0,o.Jh)(this,function(n){switch(n.label){case 0:return[4,_performSignInRequest(e,"POST","/v1/accounts:signInWithPhoneNumber",_addTidIfNecessary(e,t))];case 1:if((r=n.sent()).temporaryProof)throw _makeTaggedError(e,"account-exists-with-different-credential",r);return[2,r]}})})}(e,(0,o.pi)({idToken:t},this._makeVerificationRequest()))},PhoneAuthCredential.prototype._getReauthenticationResolver=function(e){return function(e,t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(r){return[2,_performSignInRequest(e,"POST","/v1/accounts:signInWithPhoneNumber",_addTidIfNecessary(e,(0,o.pi)((0,o.pi)({},t),{operation:"REAUTH"})),F)]})})}(e,this._makeVerificationRequest())},PhoneAuthCredential.prototype._makeVerificationRequest=function(){var e=this.params,t=e.temporaryProof,r=e.phoneNumber,n=e.verificationId,i=e.verificationCode;return t&&r?{temporaryProof:t,phoneNumber:r}:{sessionInfo:n,code:i}},PhoneAuthCredential.prototype.toJSON=function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e},PhoneAuthCredential.fromJSON=function(e){"string"==typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,n=t.verificationCode,i=t.phoneNumber,o=t.temporaryProof;return n||r||i||o?new PhoneAuthCredential({verificationId:r,verificationCode:n,phoneNumber:i,temporaryProof:o}):null}}(U);var J=function(){function ActionCodeURL(e){var t,r,n,i,o,a,u=(0,s.zd)((0,s.pd)(e)),c=null!==(t=u.apiKey)&&void 0!==t?t:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,d=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(n=u.mode)&&void 0!==n?n:null);_assert(c&&l&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=l,this.continueUrl=null!==(i=u.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=u.tenantId)&&void 0!==a?a:null}return ActionCodeURL.parseLink=function(e){var t,r,n,i=(r=(t=(0,s.zd)((0,s.pd)(e)).link)?(0,s.zd)((0,s.pd)(t)).deep_link_id:null,((n=(0,s.zd)((0,s.pd)(e)).deep_link_id)?(0,s.zd)((0,s.pd)(n)).link:null)||n||r||t||e);try{return new ActionCodeURL(i)}catch(e){return null}},ActionCodeURL}(),B=function(){function EmailAuthProvider(){this.providerId=EmailAuthProvider.PROVIDER_ID}return EmailAuthProvider.credential=function(e,t){return G._fromEmailAndPassword(e,t)},EmailAuthProvider.credentialWithLink=function(e,t){var r=J.parseLink(t);return _assert(r,"argument-error"),G._fromEmailAndCode(e,r.code,r.tenantId)},EmailAuthProvider.PROVIDER_ID="password",EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD="password",EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD="emailLink",EmailAuthProvider}(),W=function(){function FederatedAuthProvider(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}return FederatedAuthProvider.prototype.setDefaultLanguage=function(e){this.defaultLanguageCode=e},FederatedAuthProvider.prototype.setCustomParameters=function(e){return this.customParameters=e,this},FederatedAuthProvider.prototype.getCustomParameters=function(){return this.customParameters},FederatedAuthProvider}(),V=function(e){function BaseOAuthProvider(){var t=null!==e&&e.apply(this,arguments)||this;return t.scopes=[],t}return(0,o.ZT)(BaseOAuthProvider,e),BaseOAuthProvider.prototype.addScope=function(e){return this.scopes.includes(e)||this.scopes.push(e),this},BaseOAuthProvider.prototype.getScopes=function(){return(0,o.ev)([],this.scopes,!0)},BaseOAuthProvider}(W);!function(e){function OAuthProvider(){return null!==e&&e.apply(this,arguments)||this}(0,o.ZT)(OAuthProvider,e),OAuthProvider.credentialFromJSON=function(e){var t="string"==typeof e?JSON.parse(e):e;return _assert("providerId"in t&&"signInMethod"in t,"argument-error"),D._fromParams(t)},OAuthProvider.prototype.credential=function(e){return this._credential((0,o.pi)((0,o.pi)({},e),{nonce:e.rawNonce}))},OAuthProvider.prototype._credential=function(e){return _assert(e.idToken||e.accessToken,"argument-error"),D._fromParams((0,o.pi)((0,o.pi)({},e),{providerId:this.providerId,signInMethod:this.providerId}))},OAuthProvider.credentialFromResult=function(e){return OAuthProvider.oauthCredentialFromTaggedObject(e)},OAuthProvider.credentialFromError=function(e){return OAuthProvider.oauthCredentialFromTaggedObject(e.customData||{})},OAuthProvider.oauthCredentialFromTaggedObject=function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,n=t.oauthAccessToken,i=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,a=t.providerId;if(!n&&!i&&!r&&!o||!a)return null;try{return new OAuthProvider(a)._credential({idToken:r,accessToken:n,nonce:s,pendingToken:o})}catch(e){return null}}}(V),function(e){function FacebookAuthProvider(){return e.call(this,"facebook.com")||this}(0,o.ZT)(FacebookAuthProvider,e),FacebookAuthProvider.credential=function(e){return D._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken:e})},FacebookAuthProvider.credentialFromResult=function(e){return FacebookAuthProvider.credentialFromTaggedObject(e)},FacebookAuthProvider.credentialFromError=function(e){return FacebookAuthProvider.credentialFromTaggedObject(e.customData||{})},FacebookAuthProvider.credentialFromTaggedObject=function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(t.oauthAccessToken)}catch(e){return null}},FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com",FacebookAuthProvider.PROVIDER_ID="facebook.com"}(V),function(e){function GoogleAuthProvider(){var t=e.call(this,"google.com")||this;return t.addScope("profile"),t}(0,o.ZT)(GoogleAuthProvider,e),GoogleAuthProvider.credential=function(e,t){return D._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})},GoogleAuthProvider.credentialFromResult=function(e){return GoogleAuthProvider.credentialFromTaggedObject(e)},GoogleAuthProvider.credentialFromError=function(e){return GoogleAuthProvider.credentialFromTaggedObject(e.customData||{})},GoogleAuthProvider.credentialFromTaggedObject=function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,n=t.oauthAccessToken;if(!r&&!n)return null;try{return GoogleAuthProvider.credential(r,n)}catch(e){return null}},GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com",GoogleAuthProvider.PROVIDER_ID="google.com"}(V),function(e){function GithubAuthProvider(){return e.call(this,"github.com")||this}(0,o.ZT)(GithubAuthProvider,e),GithubAuthProvider.credential=function(e){return D._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken:e})},GithubAuthProvider.credentialFromResult=function(e){return GithubAuthProvider.credentialFromTaggedObject(e)},GithubAuthProvider.credentialFromError=function(e){return GithubAuthProvider.credentialFromTaggedObject(e.customData||{})},GithubAuthProvider.credentialFromTaggedObject=function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return GithubAuthProvider.credential(t.oauthAccessToken)}catch(e){return null}},GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com",GithubAuthProvider.PROVIDER_ID="github.com"}(V);var x=function(e){function SAMLAuthCredential(t,r){var n=e.call(this,t,t)||this;return n.pendingToken=r,n}return(0,o.ZT)(SAMLAuthCredential,e),SAMLAuthCredential.prototype._getIdTokenResponse=function(e){return signInWithIdp(e,this.buildRequest())},SAMLAuthCredential.prototype._linkToIdToken=function(e,t){var r=this.buildRequest();return r.idToken=t,signInWithIdp(e,r)},SAMLAuthCredential.prototype._getReauthenticationResolver=function(e){var t=this.buildRequest();return t.autoCreate=!1,signInWithIdp(e,t)},SAMLAuthCredential.prototype.toJSON=function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}},SAMLAuthCredential.fromJSON=function(e){var t="string"==typeof e?JSON.parse(e):e,r=t.providerId,n=t.signInMethod,i=t.pendingToken;return r&&n&&i&&r===n?new SAMLAuthCredential(r,i):null},SAMLAuthCredential._create=function(e,t){return new SAMLAuthCredential(e,t)},SAMLAuthCredential.prototype.buildRequest=function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}},SAMLAuthCredential}(U);!function(e){function SAMLAuthProvider(t){return _assert(t.startsWith("saml."),"argument-error"),e.call(this,t)||this}(0,o.ZT)(SAMLAuthProvider,e),SAMLAuthProvider.credentialFromResult=function(e){return SAMLAuthProvider.samlCredentialFromTaggedObject(e)},SAMLAuthProvider.credentialFromError=function(e){return SAMLAuthProvider.samlCredentialFromTaggedObject(e.customData||{})},SAMLAuthProvider.credentialFromJSON=function(e){var t=x.fromJSON(e);return _assert(t,"argument-error"),t},SAMLAuthProvider.samlCredentialFromTaggedObject=function(e){var t=e._tokenResponse;if(!t)return null;var r=t.pendingToken,n=t.providerId;if(!r||!n)return null;try{return x._create(n,r)}catch(e){return null}}}(W),function(e){function TwitterAuthProvider(){return e.call(this,"twitter.com")||this}(0,o.ZT)(TwitterAuthProvider,e),TwitterAuthProvider.credential=function(e,t){return D._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})},TwitterAuthProvider.credentialFromResult=function(e){return TwitterAuthProvider.credentialFromTaggedObject(e)},TwitterAuthProvider.credentialFromError=function(e){return TwitterAuthProvider.credentialFromTaggedObject(e.customData||{})},TwitterAuthProvider.credentialFromTaggedObject=function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,n=t.oauthTokenSecret;if(!r||!n)return null;try{return TwitterAuthProvider.credential(r,n)}catch(e){return null}},TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com",TwitterAuthProvider.PROVIDER_ID="twitter.com"}(V);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var j=function(){function UserCredentialImpl(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}return UserCredentialImpl._fromIdTokenResponse=function(e,t,r,n){return void 0===n&&(n=!1),(0,o.mG)(this,void 0,void 0,function(){var i,s;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,R._fromIdTokenResponse(e,r,n)];case 1:return i=o.sent(),s=providerIdForResponse(r),[2,new UserCredentialImpl({user:i,providerId:s,_tokenResponse:r,operationType:t})]}})})},UserCredentialImpl._forOperation=function(e,t,r){return(0,o.mG)(this,void 0,void 0,function(){var n;return(0,o.Jh)(this,function(i){switch(i.label){case 0:return[4,e._updateTokensIfNecessary(r,!0)];case 1:return i.sent(),n=providerIdForResponse(r),[2,new UserCredentialImpl({user:e,providerId:n,_tokenResponse:r,operationType:t})]}})})},UserCredentialImpl}();function providerIdForResponse(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var q=function(e){function MultiFactorError(t,r,n,i){var o,s=this;return(s=e.call(this,r.code,r.message)||this).operationType=n,s.user=i,Object.setPrototypeOf(s,MultiFactorError.prototype),s.customData={appName:t.name,tenantId:null!==(o=t.tenantId)&&void 0!==o?o:void 0,_serverResponse:r.customData._serverResponse,operationType:n},s}return(0,o.ZT)(MultiFactorError,e),MultiFactorError._fromErrorAndOperation=function(e,t,r,n){return new MultiFactorError(e,t,r,n)},MultiFactorError}(s.ZR);function _processCredentialSavingMfaContextIfNecessary(e,t,r,n){return("reauthenticate"===t?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(function(r){if(r.code==="auth/".concat("multi-factor-auth-required"))throw q._fromErrorAndOperation(e,r,t,n);throw r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _signInWithCredential(e,t,r){return void 0===r&&(r=!1),(0,o.mG)(this,void 0,void 0,function(){var n,i,s;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,_processCredentialSavingMfaContextIfNecessary(e,n="signIn",t)];case 1:return i=o.sent(),[4,j._fromIdTokenResponse(e,n,i)];case 2:if(s=o.sent(),r)return[3,4];return[4,e._updateCurrentUser(s.user)];case 3:o.sent(),o.label=4;case 4:return[2,s]}})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var z=function(){function MultiFactorInfoImpl(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}return MultiFactorInfoImpl._fromServerResponse=function(e,t){return"phoneInfo"in t?K._fromServerResponse(e,t):"totpInfo"in t?H._fromServerResponse(e,t):_fail(e,"internal-error")},MultiFactorInfoImpl}(),K=function(e){function PhoneMultiFactorInfoImpl(t){var r=e.call(this,"phone",t)||this;return r.phoneNumber=t.phoneInfo,r}return(0,o.ZT)(PhoneMultiFactorInfoImpl,e),PhoneMultiFactorInfoImpl._fromServerResponse=function(e,t){return new PhoneMultiFactorInfoImpl(t)},PhoneMultiFactorInfoImpl}(z),H=function(e){function TotpMultiFactorInfoImpl(t){return e.call(this,"totp",t)||this}return(0,o.ZT)(TotpMultiFactorInfoImpl,e),TotpMultiFactorInfoImpl._fromServerResponse=function(e,t){return new TotpMultiFactorInfoImpl(t)},TotpMultiFactorInfoImpl}(z);function signInWithEmailAndPassword(e,t,r){return function(e,t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(r){return[2,_signInWithCredential(_castAuth(e),t)]})})}((0,s.m9)(e),B.credential(t,r))}var GenericAdditionalUserInfo=function(e,t,r){void 0===r&&(r={}),this.isNewUser=e,this.providerId=t,this.profile=r},Z=function(e){function FederatedAdditionalUserInfoWithUsername(t,r,n,i){var o=e.call(this,t,r,n)||this;return o.username=i,o}return(0,o.ZT)(FederatedAdditionalUserInfoWithUsername,e),FederatedAdditionalUserInfoWithUsername}(GenericAdditionalUserInfo);(0,o.ZT)(function(e,t){return GenericAdditionalUserInfo.call(this,e,"facebook.com",t)||this},GenericAdditionalUserInfo),(0,o.ZT)(function(e,t){return Z.call(this,e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)||this},Z),(0,o.ZT)(function(e,t){return GenericAdditionalUserInfo.call(this,e,"google.com",t)||this},GenericAdditionalUserInfo),(0,o.ZT)(function(e,t,r){return Z.call(this,e,"twitter.com",t,r)||this},Z);var X=function(){function MultiFactorSessionImpl(e,t,r){this.type=e,this.credential=t,this.auth=r}return MultiFactorSessionImpl._fromIdtoken=function(e,t){return new MultiFactorSessionImpl("enroll",e,t)},MultiFactorSessionImpl._fromMfaPendingCredential=function(e){return new MultiFactorSessionImpl("signin",e)},MultiFactorSessionImpl.prototype.toJSON=function(){var e,t="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:((e={})[t]=this.credential,e)}},MultiFactorSessionImpl.fromJSON=function(e){var t,r;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return MultiFactorSessionImpl._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(r=e.multiFactorSession)||void 0===r?void 0:r.idToken)return MultiFactorSessionImpl._fromIdtoken(e.multiFactorSession.idToken)}return null},MultiFactorSessionImpl}();!function(){function MultiFactorResolverImpl(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}MultiFactorResolverImpl._fromError=function(e,t){var r=this,n=_castAuth(e),i=t.customData._serverResponse,s=(i.mfaInfo||[]).map(function(e){return z._fromServerResponse(n,e)});_assert(i.mfaPendingCredential,n,"internal-error");var a=X._fromMfaPendingCredential(i.mfaPendingCredential);return new MultiFactorResolverImpl(a,s,function(e){return(0,o.mG)(r,void 0,void 0,function(){var r,s,u;return(0,o.Jh)(this,function(c){switch(c.label){case 0:return[4,e._process(n,a)];case 1:switch(r=c.sent(),delete i.mfaInfo,delete i.mfaPendingCredential,s=(0,o.pi)((0,o.pi)({},i),{idToken:r.idToken,refreshToken:r.refreshToken}),t.operationType){case"signIn":return[3,2];case"reauthenticate":return[3,5]}return[3,6];case 2:return[4,j._fromIdTokenResponse(n,t.operationType,s)];case 3:return u=c.sent(),[4,n._updateCurrentUser(u.user)];case 4:return c.sent(),[2,u];case 5:return _assert(t.user,n,"internal-error"),[2,j._forOperation(t.user,t.operationType,s)];case 6:_fail(n,"internal-error"),c.label=7;case 7:return[2]}})})})},MultiFactorResolverImpl.prototype.resolveSignIn=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(r){return t=e,[2,this.signInResolver(t)]})})}}(),function(){function MultiFactorUserImpl(e){var t=this;this.user=e,this.enrolledFactors=[],e._onReload(function(r){r.mfaInfo&&(t.enrolledFactors=r.mfaInfo.map(function(t){return z._fromServerResponse(e.auth,t)}))})}MultiFactorUserImpl._fromUser=function(e){return new MultiFactorUserImpl(e)},MultiFactorUserImpl.prototype.getSession=function(){return(0,o.mG)(this,void 0,void 0,function(){var e,t;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return t=(e=X)._fromIdtoken,[4,this.user.getIdToken()];case 1:return[2,t.apply(e,[r.sent(),this.user.auth])]}})})},MultiFactorUserImpl.prototype.enroll=function(e,t){return(0,o.mG)(this,void 0,void 0,function(){var r,n,i;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return r=e,[4,this.getSession()];case 1:return n=o.sent(),[4,_logoutIfInvalidated(this.user,r._process(this.user.auth,n,t))];case 2:return i=o.sent(),[4,this.user._updateTokensIfNecessary(i)];case 3:return o.sent(),[2,this.user.reload()]}})})},MultiFactorUserImpl.prototype.unenroll=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t,r,n;return(0,o.Jh)(this,function(i){switch(i.label){case 0:return t="string"==typeof e?e:e.uid,[4,this.user.getIdToken()];case 1:r=i.sent(),i.label=2;case 2:var o;return i.trys.push([2,6,,7]),[4,_logoutIfInvalidated(this.user,_performApiRequest(o=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",_addTidIfNecessary(o,{idToken:r,mfaEnrollmentId:t})))];case 3:return n=i.sent(),this.enrolledFactors=this.enrolledFactors.filter(function(e){return e.uid!==t}),[4,this.user._updateTokensIfNecessary(n)];case 4:return i.sent(),[4,this.user.reload()];case 5:return i.sent(),[3,7];case 6:throw i.sent();case 7:return[2]}})})}}(),new WeakMap;var Y="@firebase/auth",$="0.23.2",Q=function(){function AuthInterop(e){this.auth=e,this.internalListeners=new Map}return AuthInterop.prototype.getUid=function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null},AuthInterop.prototype.getToken=function(e){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(t){switch(t.label){case 0:return this.assertAuthConfigured(),[4,this.auth._initializationPromise];case 1:if(t.sent(),!this.auth.currentUser)return[2,null];return[4,this.auth.currentUser.getIdToken(e)];case 2:return[2,{accessToken:t.sent()}]}})})},AuthInterop.prototype.addAuthTokenListener=function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged(function(t){e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}},AuthInterop.prototype.removeAuthTokenListener=function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())},AuthInterop.prototype.assertAuthConfigured=function(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")},AuthInterop.prototype.updateProactiveRefresh=function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()},AuthInterop}();function registerAuth(e){(0,a.Xd)(new u.wA("auth",function(t,r){var n,i,o=r.options,s=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),c=s.options,l=c.apiKey,d=c.authDomain;_assert(l&&!l.includes(":"),"invalid-api-key",{appName:s.name});var h={apiKey:l,authDomain:d,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(e)},p=new M(s,a,u,h);return i=(Array.isArray(n=(null==o?void 0:o.persistence)||[])?n:[n]).map(_getInstance),(null==o?void 0:o.errorMap)&&p._updateErrorMap(o.errorMap),p._initializeWithPersistence(i,null==o?void 0:o.popupRedirectResolver),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(e,t,r){e.getProvider("auth-internal").initialize()})),(0,a.Xd)(new u.wA("auth-internal",function(e){var t;return t=_castAuth(e.getProvider("auth").getImmediate()),new Q(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,a.KN)(Y,$,/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(e)),(0,a.KN)(Y,$,"esm5")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ee=function(){function BrowserPersistenceClass(e,t){this.storageRetriever=e,this.type=t}return BrowserPersistenceClass.prototype._isAvailable=function(){try{if(!this.storage)return Promise.resolve(!1);return this.storage.setItem(l,"1"),this.storage.removeItem(l),Promise.resolve(!0)}catch(e){return Promise.resolve(!1)}},BrowserPersistenceClass.prototype._set=function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()},BrowserPersistenceClass.prototype._get=function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)},BrowserPersistenceClass.prototype._remove=function(e){return this.storage.removeItem(e),Promise.resolve()},Object.defineProperty(BrowserPersistenceClass.prototype,"storage",{get:function(){return this.storageRetriever()},enumerable:!1,configurable:!0}),BrowserPersistenceClass}(),et=function(e){function BrowserLocalPersistence(){var t,r,n=e.call(this,function(){return window.localStorage},"LOCAL")||this;return n.boundEventHandler=function(e,t){return n.onStorageEvent(e,t)},n.listeners={},n.localCache={},n.pollTimer=null,n.safariLocalStorageNotSynced=(_isSafari(t=(0,s.z$)())||_isIOS(t))&&function(){try{return!!(window&&window!==window.top)}catch(e){return!1}}(),n.fallbackToPolling=(void 0===r&&(r=(0,s.z$)()),_isIOS(r)||_isAndroid(r)||_isWebOS(r)||_isBlackBerry(r)||/windows phone/i.test(r)||_isIEMobile(r)),n._shouldAllowMigration=!0,n}return(0,o.ZT)(BrowserLocalPersistence,e),BrowserLocalPersistence.prototype.forAllChangedKeys=function(e){for(var t=0,r=Object.keys(this.listeners);t<r.length;t++){var n=r[t],i=this.storage.getItem(n),o=this.localCache[n];i!==o&&e(n,o,i)}},BrowserLocalPersistence.prototype.onStorageEvent=function(e,t){var r=this;if(void 0===t&&(t=!1),!e.key){this.forAllChangedKeys(function(e,t,n){r.notifyListeners(e,n)});return}var n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(n);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}var triggerListeners=function(){var e=r.storage.getItem(n);(t||r.localCache[n]!==e)&&r.notifyListeners(n,e)},o=this.storage.getItem(n);(0,s.w1)()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(triggerListeners,10):triggerListeners()},BrowserLocalPersistence.prototype.notifyListeners=function(e,t){this.localCache[e]=t;var r=this.listeners[e];if(r)for(var n=0,i=Array.from(r);n<i.length;n++)(0,i[n])(t?JSON.parse(t):t)},BrowserLocalPersistence.prototype.startPolling=function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(function(){e.forAllChangedKeys(function(t,r,n){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:n}),!0)})},1e3)},BrowserLocalPersistence.prototype.stopPolling=function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)},BrowserLocalPersistence.prototype.attachListener=function(){window.addEventListener("storage",this.boundEventHandler)},BrowserLocalPersistence.prototype.detachListener=function(){window.removeEventListener("storage",this.boundEventHandler)},BrowserLocalPersistence.prototype._addListener=function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)},BrowserLocalPersistence.prototype._removeListener=function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())},BrowserLocalPersistence.prototype._set=function(t,r){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(n){switch(n.label){case 0:return[4,e.prototype._set.call(this,t,r)];case 1:return n.sent(),this.localCache[t]=JSON.stringify(r),[2]}})})},BrowserLocalPersistence.prototype._get=function(t){return(0,o.mG)(this,void 0,void 0,function(){var r;return(0,o.Jh)(this,function(n){switch(n.label){case 0:return[4,e.prototype._get.call(this,t)];case 1:return r=n.sent(),this.localCache[t]=JSON.stringify(r),[2,r]}})})},BrowserLocalPersistence.prototype._remove=function(t){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,e.prototype._remove.call(this,t)];case 1:return r.sent(),delete this.localCache[t],[2]}})})},BrowserLocalPersistence.type="LOCAL",BrowserLocalPersistence}(ee),er=function(e){function BrowserSessionPersistence(){return e.call(this,function(){return window.sessionStorage},"SESSION")||this}return(0,o.ZT)(BrowserSessionPersistence,e),BrowserSessionPersistence.prototype._addListener=function(e,t){},BrowserSessionPersistence.prototype._removeListener=function(e,t){},BrowserSessionPersistence.type="SESSION",BrowserSessionPersistence}(ee),en=function(e){function IdpCredential(t){var r=e.call(this,"custom","custom")||this;return r.params=t,r}return(0,o.ZT)(IdpCredential,e),IdpCredential.prototype._getIdTokenResponse=function(e){return signInWithIdp(e,this._buildIdpRequest())},IdpCredential.prototype._linkToIdToken=function(e,t){return signInWithIdp(e,this._buildIdpRequest(t))},IdpCredential.prototype._getReauthenticationResolver=function(e){return signInWithIdp(e,this._buildIdpRequest())},IdpCredential.prototype._buildIdpRequest=function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t},IdpCredential}(U);function _signIn(e){return _signInWithCredential(e.auth,new en(e),e.bypassAuthState)}function _reauth(e){var t=e.auth,r=e.user;return _assert(r,t,"internal-error"),/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t,r){return void 0===r&&(r=!1),(0,o.mG)(this,void 0,void 0,function(){var n,i,s,a,u,c;return(0,o.Jh)(this,function(o){switch(o.label){case 0:n=e.auth,i="reauthenticate",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,_logoutIfInvalidated(e,_processCredentialSavingMfaContextIfNecessary(n,i,t,e),r)];case 2:return _assert((s=o.sent()).idToken,n,"internal-error"),_assert(a=_parseToken(s.idToken),n,"internal-error"),u=a.sub,_assert(e.uid===u,n,"user-mismatch"),[2,j._forOperation(e,i,s)];case 3:throw(null==(c=o.sent())?void 0:c.code)==="auth/".concat("user-not-found")&&_fail(n,"user-mismatch"),c;case 4:return[2]}})})}(r,new en(e),e.bypassAuthState)}function _link(e){return(0,o.mG)(this,void 0,void 0,function(){var t,r;return(0,o.Jh)(this,function(n){return t=e.auth,_assert(r=e.user,t,"internal-error"),[2,function(e,t,r){return void 0===r&&(r=!1),(0,o.mG)(this,void 0,void 0,function(){var n,i,s,a,u,c;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return i=_logoutIfInvalidated,s=[e],u=(a=t)._linkToIdToken,c=[e.auth],[4,e.getIdToken()];case 1:return[4,i.apply(void 0,s.concat([u.apply(a,c.concat([o.sent()])),r]))];case 2:return n=o.sent(),[2,j._forOperation(e,"link",n)]}})})}(r,new en(e),e.bypassAuthState)]})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ei=function(){function AbstractPopupRedirectOperation(e,t,r,n,i){void 0===i&&(i=!1),this.auth=e,this.resolver=r,this.user=n,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}return AbstractPopupRedirectOperation.prototype.execute=function(){var e=this;return new Promise(function(t,r){return(0,o.mG)(e,void 0,void 0,function(){var e,n;return(0,o.Jh)(this,function(i){switch(i.label){case 0:this.pendingPromise={resolve:t,reject:r},i.label=1;case 1:return i.trys.push([1,4,,5]),e=this,[4,this.resolver._initialize(this.auth)];case 2:return e.eventManager=i.sent(),[4,this.onExecution()];case 3:return i.sent(),this.eventManager.registerConsumer(this),[3,5];case 4:return n=i.sent(),this.reject(n),[3,5];case 5:return[2]}})})})},AbstractPopupRedirectOperation.prototype.onAuthEvent=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t,r,n,i,s,a,u,c,l;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(t=e.urlResponse,r=e.sessionId,n=e.postBody,i=e.tenantId,s=e.error,a=e.type,s)return this.reject(s),[2];u={auth:this.auth,requestUri:t,sessionId:r,tenantId:i||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState},o.label=1;case 1:return o.trys.push([1,3,,4]),c=this.resolve,[4,this.getIdpTask(a)(u)];case 2:return c.apply(this,[o.sent()]),[3,4];case 3:return l=o.sent(),this.reject(l),[3,4];case 4:return[2]}})})},AbstractPopupRedirectOperation.prototype.onError=function(e){this.reject(e)},AbstractPopupRedirectOperation.prototype.getIdpTask=function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}},AbstractPopupRedirectOperation.prototype.resolve=function(e){this.pendingPromise||debugFail("Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()},AbstractPopupRedirectOperation.prototype.reject=function(e){this.pendingPromise||debugFail("Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()},AbstractPopupRedirectOperation.prototype.unregisterAndCleanUp=function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()},AbstractPopupRedirectOperation}(),eo=new Map,es=function(e){function RedirectAction(t,r,n){void 0===n&&(n=!1);var i=e.call(this,t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n)||this;return i.eventId=null,i}return(0,o.ZT)(RedirectAction,e),RedirectAction.prototype.execute=function(){return(0,o.mG)(this,void 0,void 0,function(){var t,r,n,i;return(0,o.Jh)(this,function(s){switch(s.label){case 0:if(t=eo.get(this.auth._key()))return[3,8];s.label=1;case 1:return s.trys.push([1,6,,7]),[4,function(e,t){return(0,o.mG)(this,void 0,void 0,function(){var r,n,i;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return r=_persistenceKeyName("pendingRedirect",t.config.apiKey,t.name),[4,(n=_getInstance(e._redirectPersistence))._isAvailable()];case 1:if(!o.sent())return[2,!1];return[4,n._get(r)];case 2:return i="true"===o.sent(),[4,n._remove(r)];case 3:return o.sent(),[2,i]}})})}(this.resolver,this.auth)];case 2:if(!s.sent())return[3,4];return[4,e.prototype.execute.call(this)];case 3:return n=s.sent(),[3,5];case 4:n=null,s.label=5;case 5:return r=n,t=function(){return Promise.resolve(r)},[3,7];case 6:return i=s.sent(),t=function(){return Promise.reject(i)},[3,7];case 7:eo.set(this.auth._key(),t),s.label=8;case 8:return this.bypassAuthState||eo.set(this.auth._key(),function(){return Promise.resolve(null)}),[2,t()]}})})},RedirectAction.prototype.onAuthEvent=function(t){return(0,o.mG)(this,void 0,void 0,function(){var r;return(0,o.Jh)(this,function(n){switch(n.label){case 0:if("signInViaRedirect"===t.type)return[2,e.prototype.onAuthEvent.call(this,t)];if("unknown"===t.type)return this.resolve(null),[2];if(!t.eventId)return[3,2];return[4,this.auth._redirectUserForId(t.eventId)];case 1:if(r=n.sent())return this.user=r,[2,e.prototype.onAuthEvent.call(this,t)];this.resolve(null),n.label=2;case 2:return[2]}})})},RedirectAction.prototype.onExecution=function(){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(e){return[2]})})},RedirectAction.prototype.cleanUp=function(){},RedirectAction}(ei);function _overrideRedirectResult(e,t){eo.set(e._key(),t)}function _getRedirectResult(e,t,r){return void 0===r&&(r=!1),(0,o.mG)(this,void 0,void 0,function(){var n,i,s;return(0,o.Jh)(this,function(o){switch(o.label){case 0:var a;return a=n=_castAuth(e),i=t?_getInstance(t):(_assert(a._popupRedirectResolver,a,"argument-error"),a._popupRedirectResolver),[4,new es(n,i,r).execute()];case 1:if(!((s=o.sent())&&!r))return[3,4];return delete s.user._redirectEventId,[4,n._persistUserIfCurrent(s.user)];case 2:return o.sent(),[4,n._setRedirectUser(null,t)];case 3:o.sent(),o.label=4;case 4:return[2,s]}})})}var ea=encodeURIComponent("fac");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _cordovaWindow(){return window}function eventUid(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(function(e){return e}).join("-")}function isNullRedirectEvent(e){var t=e.type,r=e.error;return"unknown"===t&&(null==r?void 0:r.code)==="auth/".concat("no-auth-event")}var eu=function(e){function CordovaAuthEventManager(){var t=null!==e&&e.apply(this,arguments)||this;return t.passiveListeners=new Set,t.initPromise=new Promise(function(e){t.resolveInialized=e}),t}return(0,o.ZT)(CordovaAuthEventManager,e),CordovaAuthEventManager.prototype.addPassiveListener=function(e){this.passiveListeners.add(e)},CordovaAuthEventManager.prototype.removePassiveListener=function(e){this.passiveListeners.delete(e)},CordovaAuthEventManager.prototype.resetRedirect=function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1},CordovaAuthEventManager.prototype.onEvent=function(t){return this.resolveInialized(),this.passiveListeners.forEach(function(e){return e(t)}),e.prototype.onEvent.call(this,t)},CordovaAuthEventManager.prototype.initialized=function(){return(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return[4,this.initPromise];case 1:return e.sent(),[2]}})})},CordovaAuthEventManager}(function(){function AuthEventManager(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return AuthEventManager.prototype.registerConsumer=function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)},AuthEventManager.prototype.unregisterConsumer=function(e){this.consumers.delete(e)},AuthEventManager.prototype.onEvent=function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var r=!1;return this.consumers.forEach(function(n){t.isEventForConsumer(e,n)&&(r=!0,t.sendToConsumer(e,n),t.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r},AuthEventManager.prototype.sendToConsumer=function(e,t){var r;if(e.error&&!isNullRedirectEvent(e)){var n=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(_createError(this.auth,n))}else t.onAuthEvent(e)},AuthEventManager.prototype.isEventForConsumer=function(e,t){var r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r},AuthEventManager.prototype.hasEventBeenHandled=function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(e))},AuthEventManager.prototype.saveEventToCache=function(e){this.cachedEventUids.add(eventUid(e)),this.lastProcessedEventTime=Date.now()},AuthEventManager}());function _getAndRemoveEvent(e){return(0,o.mG)(this,void 0,void 0,function(){var t;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,_getInstance(et)._get(persistenceKey(e))];case 1:if(!(t=r.sent()))return[3,3];return[4,_getInstance(et)._remove(persistenceKey(e))];case 2:r.sent(),r.label=3;case 3:return[2,t]}})})}function persistenceKey(e){return _persistenceKeyName("authEvent",e.config.apiKey,e.name)}function searchParamsOrEmpty(e){if(!(null==e?void 0:e.includes("?")))return{};var t=e.split("?");t[0];var r=t.slice(1);return(0,s.zd)(r.join("?"))}function generateNoEvent(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_createError("no-auth-event")}}!function(){function CordovaPopupRedirectResolver(){this._redirectPersistence=er,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}CordovaPopupRedirectResolver.prototype._initialize=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t,r;return(0,o.Jh)(this,function(n){return t=e._key(),(r=this.eventManagers.get(t))||(r=new eu(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),[2,r]})})},CordovaPopupRedirectResolver.prototype._openPopup=function(e){_fail(e,"operation-not-supported-in-this-environment")},CordovaPopupRedirectResolver.prototype._openRedirect=function(e,t,r,n){return(0,o.mG)(this,void 0,void 0,function(){var i,u,c;return(0,o.Jh)(this,function(l){var d,h,p,f,v,m,g,_,I,y,T,A,b,P,k;switch(l.label){case 0:return _assert("function"==typeof(null===(d=null==(T=_cordovaWindow())?void 0:T.universalLinks)||void 0===d?void 0:d.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),_assert(void 0!==(null===(h=null==T?void 0:T.BuildInfo)||void 0===h?void 0:h.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),_assert("function"==typeof(null===(v=null===(f=null===(p=null==T?void 0:T.cordova)||void 0===p?void 0:p.plugins)||void 0===f?void 0:f.browsertab)||void 0===v?void 0:v.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),_assert("function"==typeof(null===(_=null===(g=null===(m=null==T?void 0:T.cordova)||void 0===m?void 0:m.plugins)||void 0===g?void 0:g.browsertab)||void 0===_?void 0:_.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),_assert("function"==typeof(null===(y=null===(I=null==T?void 0:T.cordova)||void 0===I?void 0:I.InAppBrowser)||void 0===y?void 0:y.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"}),[4,this._initialize(e)];case 1:return[4,(i=l.sent()).initialized()];case 2:return l.sent(),i.resetRedirect(),eo.clear(),[4,this._originValidation(e)];case 3:return l.sent(),void 0===(A=n)&&(A=null),[4,(b=u={type:r,eventId:A,urlResponse:null,sessionId:function(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<20;r++){var n=Math.floor(Math.random()*t.length);e.push(t.charAt(n))}return e.join("")}(),postBody:null,tenantId:e.tenantId,error:_createError(e,"no-auth-event")},_getInstance(et)._set(persistenceKey(e),b))];case 4:return l.sent(),[4,function(e,t,r){var n;return(0,o.mG)(this,void 0,void 0,function(){var i,u,c;return(0,o.Jh)(this,function(l){switch(l.label){case 0:return i=_cordovaWindow().BuildInfo,t.sessionId||debugFail("AuthEvent did not contain a session ID"),[4,function(e){return(0,o.mG)(this,void 0,void 0,function(){var t,r;return(0,o.Jh)(this,function(n){switch(n.label){case 0:return t=function(e){if(/[0-9a-zA-Z]+/.test(e)||debugFail("Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return new TextEncoder().encode(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r}(e),[4,crypto.subtle.digest("SHA-256",t)];case 1:return r=n.sent(),[2,Array.from(new Uint8Array(r)).map(function(e){return e.toString(16).padStart(2,"0")}).join("")]}})})}(t.sessionId)];case 1:return u=l.sent(),c={},_isIOS()?c.ibi=i.packageName:_isAndroid()?c.apn=i.packageName:_fail(e,"operation-not-supported-in-this-environment"),i.displayName&&(c.appDisplayName=i.displayName),c.sessionId=u,[2,function(e,t,r,n,i,u){return(0,o.mG)(this,void 0,void 0,function(){var c,l,d,h,p,f,v,m,g,_,I,y;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(_assert(e.config.authDomain,e,"auth-domain-config-required"),_assert(e.config.apiKey,e,"invalid-api-key"),c={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:a.Jn,eventId:i},t instanceof W)for(t.setDefaultLanguage(e.languageCode),c.providerId=t.providerId||"",(0,s.xb)(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters())),l=0,d=Object.entries(u||{});l<d.length;l++)p=(h=d[l])[0],f=h[1],c[p]=f;for(t instanceof V&&(v=t.getScopes().filter(function(e){return""!==e})).length>0&&(c.scopes=v.join(",")),e.tenantId&&(c.tid=e.tenantId),g=0,_=Object.keys(m=c);g<_.length;g++)void 0===m[p=_[g]]&&delete m[p];return[4,e._getAppCheckToken()];case 1:var T;return y=(I=o.sent())?"#".concat(ea,"=").concat(encodeURIComponent(I)):"",[2,"".concat((T=e.config).emulator?_emulatorUrl(T,"emulator/auth/handler"):"https://".concat(T.authDomain,"/").concat("__/auth/handler"),"?").concat((0,s.xO)(m).slice(1)).concat(y)]}})})}(e,r,t.type,void 0,null!==(n=t.eventId)&&void 0!==n?n:void 0,c)]}})})}(e,u,t)];case 5:return[4,(P=l.sent(),k=_cordovaWindow().cordova,new Promise(function(e){k.plugins.browsertab.isAvailable(function(t){var r,n=null;t?k.plugins.browsertab.openUrl(P):n=k.InAppBrowser.open(P,(void 0===r&&(r=(0,s.z$)()),/(iPad|iPhone|iPod).*OS 7_\d/i.test(r)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(r))?"_blank":"_system","location=yes"),e(n)})}))];case 6:return c=l.sent(),[2,function(e,t,r){return(0,o.mG)(this,void 0,void 0,function(){var n,i;return(0,o.Jh)(this,function(o){switch(o.label){case 0:n=_cordovaWindow().cordova,i=function(){},o.label=1;case 1:return o.trys.push([1,,3,4]),[4,new Promise(function(o,s){var a=null;function authEventSeen(){o();var e,t=null===(e=n.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==r?void 0:r.close)&&r.close()}function resumed(){a||(a=window.setTimeout(function(){s(_createError(e,"redirect-cancelled-by-user"))},2e3))}function visibilityChanged(){(null==document?void 0:document.visibilityState)==="visible"&&resumed()}t.addPassiveListener(authEventSeen),document.addEventListener("resume",resumed,!1),_isAndroid()&&document.addEventListener("visibilitychange",visibilityChanged,!1),i=function(){t.removePassiveListener(authEventSeen),document.removeEventListener("resume",resumed,!1),document.removeEventListener("visibilitychange",visibilityChanged,!1),a&&window.clearTimeout(a)}})];case 2:return o.sent(),[3,4];case 3:return i(),[7];case 4:return[2]}})})}(e,i,c)]}})})},CordovaPopupRedirectResolver.prototype._isIframeWebStorageSupported=function(e,t){throw Error("Method not implemented.")},CordovaPopupRedirectResolver.prototype._originValidation=function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return(0,o.mG)(this,void 0,void 0,function(){var t,r;return(0,o.Jh)(this,function(n){switch(n.label){case 0:return t=_cordovaWindow().BuildInfo,r={},_isIOS()?r.iosBundleId=t.packageName:_isAndroid()?r.androidPackageName=t.packageName:_fail(e,"operation-not-supported-in-this-environment"),[4,/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t){return void 0===t&&(t={}),(0,o.mG)(this,void 0,void 0,function(){return(0,o.Jh)(this,function(r){return[2,_performApiRequest(e,"GET","/v1/projects",t)]})})}(e,r)];case 1:return n.sent(),[2]}})})}(e)),this.originValidationPromises[t]},CordovaPopupRedirectResolver.prototype.attachCallbackListeners=function(e,t){var r=this,n=_cordovaWindow(),i=n.universalLinks,s=n.handleOpenURL,a=n.BuildInfo,u=setTimeout(function(){return(0,o.mG)(r,void 0,void 0,function(){return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,_getAndRemoveEvent(e)];case 1:return r.sent(),t.onEvent(generateNoEvent()),[2]}})})},500),universalLinksCb=function(n){return(0,o.mG)(r,void 0,void 0,function(){var r,i;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return clearTimeout(u),[4,_getAndRemoveEvent(e)];case 1:return r=o.sent(),i=null,r&&(null==n?void 0:n.url)&&(i=function(e,t){var r,n,i,o,s,a,u=(n=(r=searchParamsOrEmpty(t)).link?decodeURIComponent(r.link):void 0,i=searchParamsOrEmpty(n).link,searchParamsOrEmpty(o=r.deep_link_id?decodeURIComponent(r.deep_link_id):void 0).link||o||i||n||t);if(u.includes("/__/auth/callback")){var c=searchParamsOrEmpty(u),l=c.firebaseError?function(e){try{return JSON.parse(e)}catch(e){return null}}(decodeURIComponent(c.firebaseError)):null,d=null===(a=null===(s=null==l?void 0:l.code)||void 0===s?void 0:s.split("auth/"))||void 0===a?void 0:a[1],h=d?_createError(d):null;return h?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:h,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:u,postBody:null}}return null}(r,n.url)),t.onEvent(i||generateNoEvent()),[2]}})})};void 0!==i&&"function"==typeof i.subscribe&&i.subscribe(null,universalLinksCb);var c="".concat(a.packageName.toLowerCase(),"://");_cordovaWindow().handleOpenURL=function(e){return(0,o.mG)(r,void 0,void 0,function(){return(0,o.Jh)(this,function(t){if(e.toLowerCase().startsWith(c)&&universalLinksCb({url:e}),"function"==typeof s)try{s(e)}catch(e){console.error(e)}return[2]})})}}}()}}]);